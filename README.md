# Reiay Messenger

## Описание

**Reiay Messenger** — это децентрализованный мессенджер с поддержкой голосовых и текстовых чатов, обмена файлами и мультиязычностью. Проект построен с использованием Rust, Axum для веб-фреймворка, SQLx для работы с базой данных PostgreSQL и gettext для поддержки i18n (интернационализации).

## Основные функции:

- Регистрация и авторизация пользователей.
- Текстовые и голосовые чаты.
- Обмен файлами.
- Мультиязычность (поддержка нескольких языков через gettext).
- Децентрализованная архитектура для хостинга приватных серверов.
- Безопасная аутентификация с использованием уникальных ключей.

## Стек технологий:
Rust: язык программирования для создания высокопроизводительных и безопасных приложений.
Axum: веб-фреймворк для создания маршрутов и обработки HTTP-запросов.
SQLx: асинхронная ORM для взаимодействия с PostgreSQL.
Tokio: асинхронный runtime для работы с I/O задачами.
gettext: библиотека для поддержки мультиязычности.

## Структура проекта:
```
reiay_rust/
│
├── src/
│   ├── i18n/                  # Модуль для работы с мультиязычностью
│   │   ├── mod.rs              # Логика загрузки переводов
│   │   └── translations/       # Переводы
│   │       ├── en.mo           # Скомпилированные переводы для английского
│   │       └── ru.mo           # Скомпилированные переводы для русского
│   ├── middleware/             # Мидлварь для обработки запросов
│   │   ├── locale_middleware.rs# Мидлварь для установки языка
│   │   └── mod.rs              # Экспорт мидлварей
│   ├── models/                 # Модели данных
│   │   ├── message.rs          # Модель сообщений
│   │   ├── role.rs             # Модель ролей
│   │   ├── room.rs             # Модель комнат
│   │   └── user.rs             # Модель пользователей
│   ├── routers/                # Маршрутизация
│   │   ├── api.rs              # Основной роутер для API
│   │   ├── messages.rs         # Роутер для сообщений
│   │   ├── roles.rs            # Роутер для ролей
│   │   ├── rooms.rs            # Роутер для комнат
│   │   ├── users.rs            # Роутер для пользователей
│   │   └── mod.rs              # Экспорт роутеров
│   ├── config.rs               # Настройки приложения
│   ├── db.rs                   # Логика подключения к базе данных
│   └── main.rs                 # Точка входа в приложение
│
├── Cargo.toml                  # Управление зависимостями проекта
└── README.md                   # Описание проекта
```

## Установка и запуск
### Шаг 1: Установка Rust и Cargo
Если у вас ещё не установлен Rust, скачайте и установите его с помощью команды:

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### Шаг 2: Клонирование репозитория
Клонируйте проект с GitHub:

```bash
git clone https://github.com/your_username/reiay_rust.git
cd reiay_rust
```

### Шаг 3: Настройка базы данных
Создайте базу данных PostgreSQL и укажите строку подключения в переменной окружения DATABASE_URL. Например:

```bash
export DATABASE_URL=postgres://username:password@localhost/reiay
```

Или создайте файл .env в корне проекта:

```bash
DATABASE_URL=postgres://username:password@localhost/reiay
```

### Шаг 4: Установка зависимостей и запуск
Запустите проект с помощью cargo:

```bash
cargo run
```

Приложение будет доступно по адресу http://localhost:8000.


## API

### Регистрация пользователя
-URL: /api/reiay/users/register
-Метод: POST
-Пример запроса:

```json
{
  "username": "user1",
  "password": "password123"
}
```

-Пример ответа:

```json
{
  "message": "User registered: user1"
}
```

### Создание комнаты
-URL: /api/reiay/rooms/create
-Метод: POST
-Пример запроса:

```json
{
  "name": "General Chat",
  "is_voice_chat": false
}
```

-Пример ответа:
```json
{
  "message": "Room created: General Chat"
}
```

### Перевод строки
Для перевода строки можно использовать мультиязычную систему с помощью вызова:

```rust
use crate::i18n::translate;

let message = translate("greeting.hello");
```

Перевод вернёт строку "Привет" для русского языка или "Hello" для английского.
